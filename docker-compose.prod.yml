version: '3'
services:
  nginx: 
    build:
      context: ./nginx
    container_name: nginx
    depends_on: 
      - backend
      - frontend
    image: ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/soccer-data-nginx
    ports: 
      - "80:80"
  api: 
    build: 
      context: ./backend
    container_name: backend
    image: ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/soccer-data-backend
    ports: 
      - "3001:3001"
  ui: 
    build: 
      context: ./frontend
    container_name: frontend
    image: ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_DEFAULT_REGION}.amazonaws.com/soccer-data-frontend
    ports: 
      - "5173:5173"
